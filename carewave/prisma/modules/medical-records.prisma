enum MedicalRecordStatus {
  DRAFT
  FINALIZED
  ARCHIVED
  UNDER_REVIEW
  AMENDED
}

model MedicalRecord {
  id                    Int                   @id @default(autoincrement())
  uuid                  String                @unique @default(uuid())
  patientId             Int
  patient               Patient               @relation("PatientMedicalRecords", fields: [patientId], references: [id])
  doctorId              Int?
  doctor                Doctor?               @relation("DoctorMedicalRecords", fields: [doctorId], references: [id])
  appointmentId         Int?                  @unique
  appointment           Appointment?          @relation("AppointmentMedicalRecord")
  admissionId           Int?                  @unique
  admission             Admission?            @relation("AdmissionMedicalRecord")
  clinicalRecordId      Int?
  clinicalRecord        ClinicalRecord?       @relation("MedicalRecordClinicalRecords", fields: [clinicalRecordId], references: [id])
  departmentId          Int?
  department            Department?           @relation("DepartmentMedicalRecords", fields: [departmentId], references: [id])
  clinicalSettingId     Int?
  clinicalSetting       ClinicalSetting?      @relation("MedicalRecordClinicalSettings", fields: [clinicalSettingId], references: [id])
  status                MedicalRecordStatus   @default(DRAFT)
  diagnosis             String?
  treatmentPlan         String?
  notes                 String?
  createdById           Int?
  createdBy             User?                 @relation("MedicalRecordCreatedBy", fields: [createdById], references: [id])
  updatedById           Int?
  updatedBy             User?                 @relation("MedicalRecordUpdatedBy", fields: [updatedById], references: [id])
  reviewedById          Int?
  reviewedBy            User?                 @relation("MedicalRecordReviewedBy", fields: [reviewedById], references: [id])
  prescriptions         Prescription[]        @relation("PrescriptionMedicalRecords")
  laboratoryTests       Laboratory[]          @relation("MedicalRecordLaboratoryTests")
  radiologyTests        Radiology[]           @relation("MedicalRecordRadiology")
  radiologyTestRecords  RadiologyTest[]       @relation("MedicalRecordRadiologyTests")
  maternity             Maternity?            @relation("MedicalRecordMaternity")
  dashboardWidget       DashboardWidget?      @relation("DashboardWidgetMedicalRecords", fields: [medicalRecordId], references: [id])
  auditLogs             AuditLog[]            @relation("MedicalRecordAuditLogs")
  createdAt             DateTime              @default(now())
  updatedAt             DateTime              @updatedAt
  discharges            Discharge[]           @relation("DischargeMedicalRecord")
  socialServiceCases    SocialServiceCase[]   @relation("SocialServiceCaseMedicalRecords")
}