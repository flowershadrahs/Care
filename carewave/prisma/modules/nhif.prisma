enum NhifClaimStatus {
  PENDING
  SUBMITTED
  APPROVED
  REJECTED
  PARTIALLY_APPROVED
  PAID
  DENIED
  UNDER_REVIEW
}

enum NhifClaimType {
  INPATIENT
  OUTPATIENT
  PHARMACY
  SURGICAL
  MATERNITY
  DIAGNOSTIC
}

model NhifClaim {
  id                  Int                   @id @default(autoincrement())
  uuid                String                @unique @default(uuid())
  claimNumber         String                @unique
  patientId           Int
  patient             Patient               @relation(fields: [patientId], references: [id])
  nhifNumber          String
  invoiceId           Int?
  invoice             Invoice?              @relation(fields: [invoiceId], references: [id])
  appointmentId       Int?
  appointment         Appointment?          @relation(fields: [appointmentId], references: [id])
  admissionId         Int?
  admission           Admission?            @relation(fields: [admissionId], references: [id])
  clinicalRecordId    Int?
  clinicalRecord      ClinicalRecord?       @relation(fields: [clinicalRecordId], references: [id])
  medicalRecordId     Int?
  medicalRecord       MedicalRecord?        @relation(fields: [medicalRecordId], references: [id])
  laboratoryId        Int?
  laboratory          Laboratory?           @relation(fields: [laboratoryId], references: [id])
  radiologyId         Int?
  radiology           Radiology?            @relation(fields: [radiologyId], references: [id])
  pharmacyId          Int?
  pharmacy            Pharmacy?             @relation(fields: [pharmacyId], references: [id])
  operationTheatreId  Int?
  operationTheatre    OperationTheatre?     @relation(fields: [operationTheatreId], references: [id])
  maternityId         Int?
  maternity           Maternity?            @relation(fields: [maternityId], references: [id])
  vaccinationId       Int?
  vaccination         Vaccination?          @relation(fields: [vaccinationId], references: [id])
  departmentId        Int?
  department          Department?           @relation(fields: [departmentId], references: [id])
  claimType           NhifClaimType
  status              NhifClaimStatus       @default(PENDING)
  submittedDate       DateTime?
  approvedDate        DateTime?
  totalAmount         Float
  approvedAmount      Float?
  rejectionReason     String?
  documents           String?
  preAuthorizationCode String?
  treatmentCode       String?
  diagnosisCodes      String?
  notes               String?
  transactionId       Int?
  transaction         Transaction?          @relation("TransactionNhifClaims", fields: [transactionId], references: [id])
  billingId           Int?
  billing             Billing?              @relation(fields: [billingId], references: [id])
  referralId          Int?
  referral            Referral?             @relation(fields: [referralId], references: [id])
  createdById         Int?
  createdBy           User?                 @relation("NhifClaimCreatedBy", fields: [createdById], references: [id])
  updatedById         Int?
  updatedBy           User?                 @relation("NhifClaimUpdatedBy", fields: [updatedById], references: [id])
  reviewedById        Int?
  reviewedBy          User?                 @relation("NhifClaimReviewedBy", fields: [reviewedById], references: [id])
  auditLogs           AuditLog[]            @relation("NhifClaimAuditLogs")
  dashboardWidgets    DashboardWidget[]     @relation("DashboardWidgetNhifClaims")
  createdAt           DateTime              @default(now())
  updatedAt           DateTime              @updatedAt
}