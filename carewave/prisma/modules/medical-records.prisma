enum MedicalRecordStatus {
  DRAFT
  FINALIZED
  ARCHIVED
  UNDER_REVIEW
  AMENDED
}

model MedicalRecord {
  id                    Int                   @id @default(autoincrement())
  uuid                  String                @unique @default(uuid())
  patientId             Int
  patient               Patient               @relation("PatientMedicalRecords", fields: [patientId], references: [id])
  doctorId              Int?
  doctor                Doctor?               @relation("DoctorMedicalRecords", fields: [doctorId], references: [id])
  appointmentId         Int?
  appointment           Appointment?          @relation("AppointmentMedicalRecord", fields: [appointmentId], references: [id])
  admissionId           Int?
  admission             Admission?            @relation("MedicalRecordAdmissions", fields: [admissionId], references: [id])
  clinicalRecordId      Int?
  clinicalRecord        ClinicalRecord?       @relation("MedicalRecordClinicalRecords", fields: [clinicalRecordId], references: [id])
  departmentId          Int?
  department            Department?           @relation("DepartmentMedicalRecords", fields: [departmentId], references: [id])
  clinicalSettingId     Int?
  clinicalSetting       ClinicalSetting?      @relation("MedicalRecordClinicalSettings", fields: [clinicalSettingId], references: [id])
  status                MedicalRecordStatus   @default(DRAFT)
  diagnosis             String?
  treatmentPlan         String?
  notes                 String?
  createdById           Int?
  createdBy             User?                 @relation("MedicalRecordCreatedBy", fields: [createdById], references: [id])
  updatedById           Int?
  updatedBy             User?                 @relation("MedicalRecordUpdatedBy", fields: [updatedById], references: [id])
  reviewedById          Int?
  reviewedBy            User?                 @relation("MedicalRecordReviewedBy", fields: [reviewedById], references: [id])
  prescriptions         Prescription[]        @relation("PrescriptionMedicalRecords")
  laboratoryTests       Laboratory[]          @relation("MedicalRecordLaboratoryTests")
  radiologyTests        Radiology[]           @relation("MedicalRecordRadiology")
  radiologyTestRecords  RadiologyTest[]       @relation("MedicalRecordRadiologyTests")
  maternity             Maternity?            @relation("MedicalRecordMaternity")
  dashboardWidget       DashboardWidget?      @relation("DashboardWidgetMedicalRecords")
  auditLogs             AuditLog[]            @relation("MedicalRecordAuditLogs")
  createdAt             DateTime              @default(now())
  updatedAt             DateTime              @updatedAt
}

model ClinicalRecord {
  id                    Int                   @id @default(autoincrement())
  uuid                  String                @unique @default(uuid())
  patientId             Int
  patient               Patient               @relation("PatientClinicalRecords", fields: [patientId], references: [id])
  doctorId              Int?
  doctor                Doctor?               @relation("DoctorClinicalRecords", fields: [doctorId], references: [id])
  departmentId          Int?
  department            Department?           @relation("DepartmentClinicalRecords", fields: [departmentId], references: [id])
  clinicalSettingId     Int?
  clinicalSetting       ClinicalSetting?      @relation("ClinicalRecordClinicalSettings", fields: [clinicalSettingId], references: [id])
  vitalSigns            String?
  symptoms              String?
  diagnosis             String?
  treatment             String?
  medicalRecord         MedicalRecord?        @relation("MedicalRecordClinicalRecords")
  prescriptions         Prescription[]        @relation("PrescriptionClinicalRecords")
  radiologyTests        RadiologyTest[]       @relation("ClinicalRecordRadiologyTests")
  maternity             Maternity?            @relation("MaternityClinicalRecords")
  createdAt             DateTime              @default(now())
  updatedAt             DateTime              @updatedAt
}