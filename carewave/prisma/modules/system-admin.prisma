enum UserRole {
  ADMIN
  DOCTOR
  NURSE
  PHARMACIST
  RADIOLOGIST
  SOCIAL_WORKER
  PATIENT
  BILLING_OFFICER
  RECEPTIONIST
  LAB_TECHNICIAN
  IT_SUPPORT
}

enum PermissionLevel {
  FULL_ACCESS
  READ_ONLY
  WRITE
  RESTRICTED
}

enum SystemLogType {
  LOGIN
  LOGOUT
  DATA_MODIFICATION
  ERROR
  SECURITY
  SYSTEM_EVENT
}

model User {
  id                    Int                   @id @default(autoincrement())
  uuid                  String                @unique @default(uuid())
  email                 String                @unique
  name                  String
  password              String
  role                  UserRole              @default(PATIENT)
  status                String                @default("ACTIVE")
  departmentId          Int?
  department            Department?           @relation("UserDepartment", fields: [departmentId], references: [id], map: "User_department_fkey")
  phone                 String?
  address               String?
  profileImage          String?
  lastLogin             DateTime?
  loginAttempts         Int                   @default(0)
  accountLocked         Boolean               @default(false)
  permissions           String?
  createdById           Int?
  createdBy             User?                 @relation("UserCreatedBy", fields: [createdById], references: [id], map: "User_createdBy_fkey")
  updatedById           Int?
  updatedBy             User?                 @relation("UserUpdatedBy", fields: [updatedById], references: [id], map: "User_updatedBy_fkey")
  createdUsers          User[]                @relation("UserCreatedBy")
  updatedUsers          User[]                @relation("UserUpdatedBy")
  payrolls              Payroll[]             @relation("PayrollEmployee")
  cssdLogs              CSSDLog[]             @relation("LoggedBy")
  cssdRequisitions      CSSDRequisition[]     @relation("RequisitionRequestedBy")
  appointmentsBooked    Appointment[]         @relation("AppointmentBookedBy")
  appointmentsCreated   Appointment[]         @relation("AppointmentCreatedBy")
  appointmentsUpdated   Appointment[]         @relation("AppointmentUpdatedBy")
  dispensingRecords     DispensingRecord[]    @relation("DispensedBy")
  refundsProcessed      Refund[]              @relation("RefundProcessedBy")
  refundsApproved       Refund[]              @relation("RefundApprovedBy")
  stockAdjustments      StockAdjustment[]     @relation("AdjustedBy")
  socialServiceCases    SocialServiceCase[]   @relation("SocialWorker")
  radiologyTests        RadiologyTest[]       @relation("Radiologist")
  radiologyTestsCreated RadiologyTest[]       @relation("RadiologyTestCreatedBy")
  radiologyTestsUpdated RadiologyTest[]       @relation("RadiologyTestUpdatedBy")
  radiologyTestsReported RadiologyTest[]      @relation("RadiologyTestReportedBy")
  radiologyCreated      Radiology[]           @relation("RadiologyCreatedBy")
  radiologyUpdated      Radiology[]           @relation("RadiologyUpdatedBy")
  nursingCare           NursingCare[]         @relation("NurseAssigned")
  nursingTasks          NursingTask[]         @relation("TaskAssignedNurse")
  nursingShifts         NursingShift[]        @relation("ShiftNurse")
  surgicalStaff         SurgicalStaff[]       @relation("SurgicalStaff")
  systemLogs            SystemLog[]           @relation("LoggedBy")
  auditLogs             AuditLog[]            @relation("PerformedBy")
  patientRecords        Patient[]             @relation("PatientUser")
  patientCreated        Patient[]             @relation("PatientCreatedBy")
  patientUpdated        Patient[]             @relation("PatientUpdatedBy")
  doctorRecords         Doctor[]              @relation("DoctorUser")
  doctorCreated         Doctor[]              @relation("DoctorCreatedBy")
  doctorUpdated         Doctor[]              @relation("DoctorUpdatedBy")
  dashboardsOwned       Dashboard[]           @relation("DashboardOwner")
  dashboardsCreated     Dashboard[]           @relation("DashboardCreatedBy")
  dashboardsUpdated     Dashboard[]           @relation("DashboardUpdatedBy")
  departmentsHeaded     Department[]          @relation("DepartmentHead")
  createdDepartments    Department[]          @relation("DepartmentCreatedBy")
  updatedDepartments    Department[]          @relation("DepartmentUpdatedBy")
  widgetCreated         DashboardWidget[]     @relation("WidgetCreatedBy")
  widgetUpdated         DashboardWidget[]     @relation("WidgetUpdatedBy")
  systemConfigCreated   SystemConfiguration[] @relation("ConfigCreatedBy")
  systemConfigUpdated   SystemConfiguration[] @relation("ConfigUpdatedBy")
  permissionCreated     RolePermission[]      @relation("PermissionCreatedBy")
  permissionUpdated     RolePermission[]      @relation("PermissionUpdatedBy")
  transactionCreated    Transaction[]         @relation("TransactionCreatedBy")
  transactionApproved   Transaction[]         @relation("TransactionApprovedBy")
  costCenterManaged     CostCenter[]          @relation("CostCenterManager")
  budgetCreated         Budget[]              @relation("BudgetCreatedBy")
  budgetApproved        Budget[]              @relation("BudgetApprovedBy")
  reconciliationCreated  Reconciliation[]      @relation("ReconciliationCreatedBy")
  reconciliationApproved Reconciliation[]      @relation("ReconciliationApprovedBy")
  costAllocationCreated CostAllocation[]      @relation("CostAllocationCreatedBy")
  costAllocationApproved CostAllocation[]     @relation("CostAllocationApprovedBy")
  payrollCreated        Payroll[]             @relation("PayrollCreatedBy")
  payrollApproved       Payroll[]             @relation("PayrollApprovedBy")
  serviceCreated        Service[]             @relation("ServiceCreatedBy")
  serviceUpdated        Service[]             @relation("ServiceUpdatedBy")
  billingCreated        Billing[]             @relation("BillingCreatedBy")
  billingUpdated        Billing[]             @relation("BillingUpdatedBy")
  invoiceCreated        Invoice[]             @relation("InvoiceCreatedBy")
  invoiceUpdated        Invoice[]             @relation("InvoiceUpdatedBy")
  billingItemCreated    BillingItem[]         @relation("BillingItemCreatedBy")
  billingItemUpdated    BillingItem[]         @relation("BillingItemUpdatedBy")
  paymentCreated        Payment[]             @relation("PaymentCreatedBy")
  paymentPlanCreated    PaymentPlan[]         @relation("PaymentPlanCreatedBy")
  paymentPlanApproved   PaymentPlan[]         @relation("PaymentPlanApprovedBy")
  invoiceDocumentUploaded InvoiceDocument[]   @relation("InvoiceDocumentUploadedBy")
  billingNotificationRecipient BillingNotification[] @relation("BillingNotificationRecipient")
  appointmentNotificationRecipient AppointmentNotification[] @relation("NotificationRecipient")
  appointmentDocumentUploaded AppointmentDocument[] @relation("DocumentUploadedBy")
  recurringAppointmentCreated RecurringAppointment[] @relation("RecurringAppointmentCreatedBy")
  recurringAppointmentUpdated RecurringAppointment[] @relation("RecurringAppointmentUpdatedBy")
  doctorAvailabilityCreated DoctorAvailability[] @relation("DoctorAvailabilityCreatedBy")
  doctorAvailabilityUpdated DoctorAvailability[] @relation("DoctorAvailabilityUpdatedBy")
  doctorQualificationCreated DoctorQualification[] @relation("DoctorQualificationCreatedBy")
  doctorQualificationUpdated DoctorQualification[] @relation("DoctorQualificationUpdatedBy")
  doctorNotificationRecipient DoctorNotification[] @relation("DoctorNotificationRecipient")
  medicalRecordCreated  MedicalRecord[]       @relation("MedicalRecordCreatedBy")
  medicalRecordUpdated  MedicalRecord[]       @relation("MedicalRecordUpdatedBy")
  medicalRecordReviewed MedicalRecord[]       @relation("MedicalRecordReviewedBy")
  medicationCreated     Medication[]          @relation("MedicationCreatedBy")
  medicationUpdated     Medication[]          @relation("MedicationUpdatedBy")
  formularyCreated      Formulary[]           @relation("FormularyCreatedBy")
  formularyUpdated      Formulary[]           @relation("FormularyUpdatedBy")
  interactionCreated    DrugInteraction[]     @relation("InteractionCreatedBy")
  interactionUpdated    DrugInteraction[]     @relation("InteractionUpdatedBy")
  adverseReactionCreated AdverseReaction[]    @relation("AdverseReactionCreatedBy")
  adverseReactionUpdated AdverseReaction[]    @relation("AdverseReactionUpdatedBy")
  pharmacyCreated       Pharmacy[]            @relation("PharmacyCreatedBy")
  pharmacyUpdated       Pharmacy[]            @relation("PharmacyUpdatedBy")
  equipmentCreated      RadiologyEquipment[]  @relation("EquipmentCreatedBy")
  equipmentUpdated      RadiologyEquipment[]  @relation("EquipmentUpdatedBy")
  maternityCreated      Maternity[]           @relation("MaternityCreatedBy")
  maternityUpdated      Maternity[]           @relation("MaternityUpdatedBy")
  maternityDocumentUploaded MaternityDocument[] @relation("MaternityDocumentUploadedBy")
  maternityNotificationRecipient MaternityNotification[] @relation("MaternityNotificationRecipient")
  vaccinationsCreated   Vaccination[]         @relation("VaccinationCreatedBy")
  vaccinationsUpdated   Vaccination[]         @relation("VaccinationUpdatedBy")
  vaccinationsNurse      Vaccination[]         @relation("VaccinationNurse")
  campaignsCreated      VaccinationCampaign[] @relation("CampaignCreatedBy")
  campaignsUpdated      VaccinationCampaign[] @relation("CampaignUpdatedBy")
  homeCareNurse         HomeCare[]            @relation("NurseHomeCare")
  homeCareCreated       HomeCare[]            @relation("HomeCareCreatedBy")
  homeCareUpdated       HomeCare[]            @relation("HomeCareUpdatedBy")
  homeCareVisitCaregiver HomeCareVisit[]      @relation("HomeCareVisitCaregiver")
  homeCareVisitCreated  HomeCareVisit[]       @relation("HomeCareVisitCreatedBy")
  homeCareVisitUpdated  HomeCareVisit[]       @relation("HomeCareVisitUpdatedBy")
  homeCareNotificationRecipient HomeCareNotification[] @relation("HomeCareNotificationRecipient")
  verifications         Verification[]        @relation("VerifiedUser")
  verificationCreated   Verification[]        @relation("VerificationCreatedBy")
  verificationUpdated   Verification[]        @relation("VerificationUpdatedBy")
  verifiedBy            Verification[]        @relation("VerifiedBy")
  verificationConfigCreated VerificationConfiguration[] @relation("ConfigCreatedBy")
  verificationConfigUpdated VerificationConfiguration[] @relation("ConfigUpdatedBy")
  referralProgramsCreated ReferralProgram[]   @relation("ReferralProgramCreatedBy")
  referralProgramsUpdated ReferralProgram[]   @relation("ReferralProgramUpdatedBy")
  referralsAsReferrer   Referral[]            @relation("Referrer")
  referralsAsReferee    Referral[]            @relation("Referee")
  referralsCreated      Referral[]            @relation("ReferralCreatedBy")
  referralsUpdated      Referral[]            @relation("ReferralUpdatedBy")
  referralRewardsRedeemed ReferralReward[]    @relation("RewardRedeemedBy")
  referralRewardsCreated ReferralReward[]     @relation("RewardCreatedBy")
  referralRewardsUpdated ReferralReward[]     @relation("RewardUpdatedBy")
  marketingCampaignsCreated MarketingCampaign[] @relation("CampaignCreatedBy")
  marketingCampaignsUpdated MarketingCampaign[] @relation("CampaignUpdatedBy")
  createdAt             DateTime              @default(now())
  updatedAt             DateTime              @updatedAt
}

model SystemConfiguration {
  id                  Int                   @id @default(autoincrement())
  uuid                String                @unique @default(uuid())
  key                 String                @unique
  value               String
  description         String?
  category            String?
  status              String                @default("ACTIVE")
  createdById         Int?
  createdBy           User?                 @relation("ConfigCreatedBy", fields: [createdById], references: [id], map: "SystemConfiguration_createdBy_fkey")
  updatedById         Int?
  updatedBy           User?                 @relation("ConfigUpdatedBy", fields: [updatedById], references: [id], map: "SystemConfiguration_updatedBy_fkey")
  auditLogs           AuditLog[]            @relation("SystemConfigAuditLogs")
  createdAt           DateTime              @default(now())
  updatedAt           DateTime              @updatedAt
}

model SystemLog {
  id                  Int                   @id @default(autoincrement())
  uuid                String                @unique @default(uuid())
  userId              Int?
  user                User?                 @relation("LoggedBy", fields: [userId], references: [id], map: "SystemLog_user_fkey")
  type                SystemLogType
  description         String
  ipAddress           String?
  deviceInfo          String?
  module              String?
  action              String
  entityId            Int?
  entityType          String?
  createdAt           DateTime              @default(now())
}

model RolePermission {
  id                  Int                   @id @default(autoincrement())
  uuid                String                @unique @default(uuid())
  role                UserRole
  module              String
  permissionLevel     PermissionLevel
  description         String?
  createdById         Int?
  createdBy           User?                 @relation("PermissionCreatedBy", fields: [createdById], references: [id], map: "RolePermission_createdBy_fkey")
  updatedById         Int?
  updatedBy           User?                 @relation("PermissionUpdatedBy", fields: [updatedById], references: [id], map: "RolePermission_updatedBy_fkey")
  auditLogs           AuditLog[]            @relation("RolePermissionAuditLogs")
  createdAt           DateTime              @default(now())
  updatedAt           DateTime              @updatedAt
}

model AuditLog {
  id                  Int                   @id @default(autoincrement())
  uuid                String                @unique @default(uuid())
  action              String
  entity              String
  entityId            Int
  userId              Int?
  user                User?                 @relation("PerformedBy", fields: [userId], references: [id], map: "AuditLog_user_fkey")
  dashboard           Dashboard?            @relation("DashboardAuditLogs", fields: [entityId], references: [id], map: "AuditLog_dashboard_fkey")
  dashboardWidget     DashboardWidget?      @relation("DashboardWidgetAuditLogs", fields: [entityId], references: [id], map: "AuditLog_dashboardWidget_fkey")
  radiology           Radiology?            @relation("RadiologyAuditLogs", fields: [entityId], references: [id], map: "AuditLog_radiology_fkey")
  radiologyTest       RadiologyTest?        @relation("RadiologyTestAuditLogs", fields: [entityId], references: [id], map: "AuditLog_radiologyTest_fkey")
  radiologyEquipment  RadiologyEquipment?   @relation("RadiologyEquipmentAuditLogs", fields: [entityId], references: [id], map: "AuditLog_radiologyEquipment_fkey")
  systemConfiguration SystemConfiguration?  @relation("SystemConfigAuditLogs", fields: [entityId], references: [id], map: "AuditLog_systemConfig_fkey")
  rolePermission      RolePermission?       @relation("RolePermissionAuditLogs", fields: [entityId], references: [id], map: "AuditLog_rolePermission_fkey")
  transaction         Transaction?          @relation("TransactionAuditLogs", fields: [entityId], references: [id], map: "AuditLog_transaction_fkey")
  costCenter          CostCenter?           @relation("CostCenterAuditLogs", fields: [entityId], references: [id], map: "AuditLog_costCenter_fkey")
  budget              Budget?               @relation("BudgetAuditLogs", fields: [entityId], references: [id], map: "AuditLog_budget_fkey")
  reconciliation      Reconciliation?       @relation("ReconciliationAuditLogs", fields: [entityId], references: [id], map: "AuditLog_reconciliation_fkey")
  bankAccount         BankAccount?          @relation("BankAccountAuditLogs", fields: [entityId], references: [id], map: "AuditLog_bankAccount_fkey")
  generalLedger       GeneralLedger?        @relation("GeneralLedgerAuditLogs", fields: [entityId], references: [id], map: "AuditLog_generalLedger_fkey")
  taxCategory         TaxCategory?          @relation("TaxCategoryAuditLogs", fields: [entityId], references: [id], map: "AuditLog_taxCategory_fkey")
  costAllocation      CostAllocation?       @relation("CostAllocationAuditLogs", fields: [entityId], references: [id], map: "AuditLog_costAllocation_fkey")
  payroll             Payroll?              @relation("PayrollAuditLogs", fields: [entityId], references: [id], map: "AuditLog_payroll_fkey")
  service             Service?              @relation("ServiceAuditLogs", fields: [entityId], references: [id], map: "AuditLog_service_fkey")
  billing             Billing?              @relation("BillingAuditLogs", fields: [entityId], references: [id], map: "AuditLog_billing_fkey")
  invoice             Invoice?              @relation("InvoiceAuditLogs", fields: [entityId], references: [id], map: "AuditLog_invoice_fkey")
  billingItem         BillingItem?          @relation("BillingItemAuditLogs", fields: [entityId], references: [id], map: "AuditLog_billingItem_fkey")
  refund              Refund?               @relation("RefundAuditLogs", fields: [entityId], references: [id], map: "AuditLog_refund_fkey")
  payment             Payment?              @relation("PaymentAuditLogs", fields: [entityId], references: [id], map: "AuditLog_payment_fkey")
  paymentPlan         PaymentPlan?          @relation("PaymentPlanAuditLogs", fields: [entityId], references: [id], map: "AuditLog_paymentPlan_fkey")
  invoiceDocument     InvoiceDocument?      @relation("InvoiceDocumentAuditLogs", fields: [entityId], references: [id], map: "AuditLog_invoiceDocument_fkey")
  appointment         Appointment?          @relation("AppointmentAuditLogs", fields: [entityId], references: [id], map: "AuditLog_appointment_fkey")
  appointmentDocument AppointmentDocument?  @relation("AppointmentDocumentAuditLogs", fields: [entityId], references: [id], map: "AuditLog_appointmentDocument_fkey")
  recurringAppointment RecurringAppointment? @relation("RecurringAppointmentAuditLogs", fields: [entityId], references: [id], map: "AuditLog_recurringAppointment_fkey")
  department          Department?           @relation("DepartmentAuditLogs", fields: [entityId], references: [id], map: "AuditLog_department_fkey")
  doctor              Doctor?               @relation("DoctorAuditLogs", fields: [entityId], references: [id], map: "AuditLog_doctor_fkey")
  doctorAvailability  DoctorAvailability?   @relation("DoctorAvailabilityAuditLogs", fields: [entityId], references: [id], map: "AuditLog_doctorAvailability_fkey")
  doctorQualification DoctorQualification? @relation("DoctorQualificationAuditLogs", fields: [entityId], references: [id], map: "AuditLog_doctorQualification_fkey")
  medicalRecord       MedicalRecord?        @relation("MedicalRecordAuditLogs", fields: [entityId], references: [id], map: "AuditLog_medicalRecord_fkey")
  patient             Patient?              @relation("PatientAuditLogs", fields: [entityId], references: [id], map: "AuditLog_patient_fkey")
  medication          Medication?           @relation("MedicationAuditLogs", fields: [entityId], references: [id], map: "AuditLog_medication_fkey")
  formulary           Formulary?            @relation("FormularyAuditLogs", fields: [entityId], references: [id], map: "AuditLog_formulary_fkey")
  drugInteraction     DrugInteraction?      @relation("DrugInteractionAuditLogs", fields: [entityId], references: [id], map: "AuditLog_drugInteraction_fkey")
  adverseReaction     AdverseReaction?      @relation("AdverseReactionAuditLogs", fields: [entityId], references: [id], map: "AuditLog_adverseReaction_fkey")
  pharmacy            Pharmacy?             @relation("PharmacyAuditLogs", fields: [entityId], references: [id], map: "AuditLog_pharmacy_fkey")
  maternity           Maternity?            @relation("MaternityAuditLogs", fields: [entityId], references: [id], map: "AuditLog_maternity_fkey")
  maternityDocument   MaternityDocument?    @relation("MaternityDocumentAuditLogs", fields: [entityId], references: [id], map: "AuditLog_maternityDocument_fkey")
  vaccination         Vaccination?          @relation("VaccinationAuditLogs", fields: [entityId], references: [id], map: "AuditLog_vaccination_fkey")
  vaccinationCampaign VaccinationCampaign?  @relation("VaccinationCampaignAuditLogs", fields: [entityId], references: [id], map: "AuditLog_vaccinationCampaign_fkey")
  homeCare            HomeCare?             @relation("HomeCareAuditLogs", fields: [entityId], references: [id], map: "AuditLog_homeCare_fkey")
  homeCareVisit       HomeCareVisit?        @relation("HomeCareVisitAuditLogs", fields: [entityId], references: [id], map: "AuditLog_homeCareVisit_fkey")
  verification        Verification?         @relation("VerificationAuditLogs", fields: [entityId], references: [id], map: "AuditLog_verification_fkey")
  verificationConfiguration VerificationConfiguration? @relation("VerificationConfigAuditLogs", fields: [entityId], references: [id], map: "AuditLog_verificationConfig_fkey")
  referralReward      ReferralReward?       @relation("ReferralRewardAuditLogs", fields: [entityId], references: [id], map: "AuditLog_referralReward_fkey")
  referralProgram     ReferralProgram?      @relation("ReferralProgramAuditLogs", fields: [entityId], references: [id], map: "AuditLog_referralProgram_fkey")
  referral            Referral?             @relation("ReferralAuditLogs", fields: [entityId], references: [id], map: "AuditLog_referral_fkey")
  details             String?
  createdAt           DateTime              @default(now())
}